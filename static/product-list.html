<!doctype html>
<html lang="zh-CN" xml:lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<meta name="renderer" content="webkit"/>
<title>CRM2.0</title>
<script src="../js/init.min.js"></script>
<link rel="stylesheet" href="../css/reset.css">
<link rel="stylesheet" href="../css/main-light.css" id="profile">
<script src="../js/jquery.min.js"></script>
</head>

<body>
	<div class="crm-wrap">
		<div class="rank-page" id="proPage">
			<div class="allPanel">
				<div class="inner row">
					<div class="searchIpt cell">
						<input type="text" placeholder="输入搜索条件搜索">
						<div class="icon"></div>
					</div>
					<div class="fnPanel searchType row">
						<div class="order">排序</div>
						<div class="filter">筛选</div>
					</div>
				</div>
			</div>
			<div class="orderFilterGroup type2 full">
				<div class="itemsBox">
					<div class="orderList">
						<div class="item active">收益率从高到低</div>
						<div class="item">收益率从高到低</div>
						<div class="item">风险率从高到低</div>
						<div class="item">风险率从低到高</div>
						<div class="item">重要推荐从高到底</div>
					</div>
				</div>
				<div class="itemsBox" style="height: 100%;">
					<div class="filterList type2">
						<div class="typeGroup">
							<div class="tt row">
								<div class="cell">客户类型</div>
								<div class="spr">全部</div>
							</div>
							<ul class="col3">
								<li class="active">全部</li>
								<li>理财类</li>
								<li>存款类</li>
							</ul>
						</div>
						<div class="typeGroup">
							<div class="tt row">
								<div class="cell">起购金额</div>
								<div class="spr">全部</div>
							</div>
							<ul class="col3">
								<li class="active">不限</li>
								<li>0-5万</li>
								<li>5-10万</li>
								<li>10-15万</li>
								<li>20-50万</li>
								<li>50万以上</li>
							</ul>
						</div>
						<div class="typeGroup">
							<div class="tt row">
								<div class="cell">产品持有时间</div>
								<div class="spr">全部</div>
							</div>
							<ul class="col3">
								<li class="active">不限</li>
								<li>1月内</li>
								<li>1-3月</li>
								<li>3-6月</li>
								<li>6-12月</li>
							</ul>
						</div>
						<div class="typeGroup">
							<div class="tt row">
								<div class="cell">风险程度</div>
								<div class="spr">全部</div>
							</div>
							<ul class="col4">
								<li class="active">不限</li>
								<li>R1</li>
								<li>R2</li>
								<li>R3</li>
								<li>R4</li>
								<li>R5</li>
							</ul>
						</div>
						<div class="typeGroup">
							<div class="tt row">
								<div class="cell">目标客户</div>
								<div class="spr">全部</div>
							</div>
							<ul class="col3">
								<li class="active">全部</li>
								<li>普通</li>
								<li>高净值</li>
								<li>私银</li>
							</ul>
						</div>
						<div class="typeGroup">
							<div class="tt row">
								<div class="cell">条线</div>
								<div class="spr">全部</div>
							</div>
							<ul class="col3">
								<li class="active">全部</li>
								<li>公司</li>
								<li>小微</li>
							</ul>
						</div>
						<div class="btnGrp row">
							<div class="cell resetBtn">重置</div>
							<div class="cell okBtn">确定</div>
						</div>
					</div>
				</div>
			</div>
			<div class="proList">
				<div class="proItem">
					<div class="title row">
						<div class="cell"><i class="proIco b"></i><span>稳盈1369期42天</span></div>
						<div class="ft12 fc-light-dark">2017.06.02至2017.07.14</div>
					</div>
					<div class="cnt row">
						<div class="cell">
							<span class="ft12 fc-light-dark">预期年化收益率</span>
							<div class="ft18 lh20">4.68%</div>
						</div>
						<div>
							<span class="ft12 fc-light-dark">起购金额</span>
							<div class="ft18 lh20">5万元</div>
						</div>
					</div>
				</div>
				<div class="proItem">
					<div class="title row">
						<div class="cell"><i class="proIco d"></i><span>稳盈1369期42天</span></div>
						<div class="ft12 fc-light-dark">2017.06.02至2017.07.14</div>
					</div>
					<div class="cnt row">
						<div class="cell">
							<span class="ft12 fc-light-dark">预期年化收益率</span>
							<div class="ft18 lh20">4.68%</div>
						</div>
						<div>
							<span class="ft12 fc-light-dark">起购金额</span>
							<div class="ft18 lh20">5万元</div>
						</div>
					</div>
				</div>
				<div class="proItem">
					<div class="title row">
						<div class="cell"><i class="proIco b"></i><span>稳盈1369期42天</span></div>
						<div class="ft12 fc-light-dark">2017.06.02至2017.07.14</div>
					</div>
					<div class="cnt row">
						<div class="cell">
							<span class="ft12 fc-light-dark">预期年化收益率</span>
							<div class="ft18 lh20">4.68%</div>
						</div>
						<div>
							<span class="ft12 fc-light-dark">起购金额</span>
							<div class="ft18 lh20">5万元</div>
						</div>
					</div>
				</div>
				<div class="proItem">
					<div class="title row">
						<div class="cell"><i class="proIco d"></i><span>稳盈1369期42天</span></div>
						<div class="ft12 fc-light-dark">2017.06.02至2017.07.14</div>
					</div>
					<div class="cnt row">
						<div class="cell">
							<span class="ft12 fc-light-dark">预期年化收益率</span>
							<div class="ft18 lh20">4.68%</div>
						</div>
						<div>
							<span class="ft12 fc-light-dark">起购金额</span>
							<div class="ft18 lh20">5万元</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript">
	$(function () {
		// 切换皮肤
		// changeTheme()()

		document.getElementById('proPage').style.minHeight = document.documentElement.clientHeight + 'px';

		// 定义公用切换方法
		var activer = function (els, fn) {
			$(els).on('click', function () {
				$(this).addClass('active').siblings().removeClass('active');
				fn(this, $(this).index())
			})
		}

		// 显示排序和筛选框
		var orderFilterGroup = $('.orderFilterGroup');
		var orderFilterItems = orderFilterGroup.find('.itemsBox');
		var filterOrOrderBtns = $('.fnPanel div');
	
		activer(filterOrOrderBtns, function (e, i) {
			var tar = orderFilterItems.eq(i);
			orderFilterGroup.addClass('show');
			orderFilterItems.removeClass('show');
			tar.addClass('show');
			if (i === 1) {
				orderFilterGroup.addClass('full');
			} else {
				orderFilterGroup.removeClass('full');
			}
		})
		orderFilterItems.on('click', function (ev) {
			ev.stopPropagation();
		})

		// 隐藏选框
		var hideTimer;
		var hideOrderFilter = function (time) {
			hideTimer && clearTimeout(hideTimer);
			hideTimer = setTimeout(function () {
				filterOrOrderBtns.removeClass('active');
				orderFilterGroup.removeClass('show');
				clearTimeout(hideTimer);
			}, time || 0)
		}
		orderFilterGroup.on('click', hideOrderFilter);

		// 排序规则选择
		activer('.orderList .item', function (e, i) {
			console.log(e.innerText, i);
			hideOrderFilter(300);
		})

		// 过滤规则选择
		activer('.filterList ul li', function (e, i) {
			console.log(e.innerText, i)
		});

		// 点击确定或重置过滤规则
		$('.btnGrp .resetBtn').on('click', function () {
			console.log('点击了重置！');
		})

		$('.btnGrp .okBtn').on('click', function () {
			console.log('点击了确定！');
			hideOrderFilter();
		})

		// 隐藏第三个以后的筛选选项
		$('.typeGroup ul li').each(function () {
			var cur = $(this);
			cur.index() < 3 ? cur.show() : cur.hide();
		})

		// 切换全部按钮
		$('.typeGroup .tt .spr').on('click', function () {
			var isActive = $(this).hasClass('active');
			var allItems = $(this).parents('.typeGroup').find('ul li');
			isActive ? $(this).removeClass('active') : $(this).addClass('active');
			if (!isActive) {
				allItems.show()
			} else {
				allItems.each(function () {
					var cur = $(this);
					cur.index() < 3 ? cur.show() : cur.hide();
				})
			}
		})

	})
	</script>
</body>
</html>
